<app-header></app-header>
<div class="min-h-screen bg-gray-50">

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    
    <div class="mb-8">
      <app-search-filters
        [isLoading]="isLoading"
        (search)="onSearch($event)"
      ></app-search-filters>
    </div>

    @if (errorMessage) {
      <div class="bg-red-50 border border-red-200 text-red-700 p-4 rounded-md mb-6">
        {{ errorMessage }}
      </div>
    }

    @if (successMessage) {
      <div class="bg-green-50 border border-green-200 text-green-700 p-4 rounded-md mb-6">
        {{ successMessage }}
      </div>
    }

    @if (isLoading) {
      <app-loading-spinner></app-loading-spinner>
    }

    @if (!isLoading) {
      
      <div class="mb-6">
        <p class="text-gray-700">
          <strong>{{ jobs.length }}</strong> offre(s) trouvée(s)
        </p>
      </div>

      @if (jobs.length === 0) {
        <div class="bg-yellow-50 border border-yellow-200 text-yellow-800 p-6 rounded-md text-center">
          <p class="text-lg font-medium">Aucune offre ne correspond à votre recherche</p>
          <p class="mt-2 text-sm">Essayez avec d'autres mots-clés ou une autre localisation</p>
        </div>
      }

      @if (jobs.length > 0) {
        <div class="grid grid-cols-1 gap-6 mb-8">
          @for (job of jobs; track job.id) {
            <app-job-item
              [job]="job"
              [isFavorite]="isFavorite(job)"
              (addToFavorites)="onAddToFavorites($event)"
              (trackApplication)="onTrackApplication($event)"
            />
          }
        </div>

        <app-pagination
          [currentPage] = "currentPage"
          [totalPages] = "totalPages"
          (pageChange) = "onPageChange($event)"
        ></app-pagination>
      }

    }

  </div>
</div>

<app-footer></app-footer>