<div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow">
  
  <h3 class="text-xl font-bold text-gray-900 mb-2">
    {{ job.name }}
  </h3>

  <p class="text-gray-600 mb-2">
    {{ job.company.name }}
  </p>

  <div class="flex items-center gap-4 text-sm text-gray-500 mb-4">
    <span class="flex items-center gap-1">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
      </svg>
      {{ getLocation() }}
    </span>
    <span>{{ formatDate(job.publication_date) }}</span>
  </div>

  <p class="text-gray-700 mb-4 line-clamp-3">
    {{ job.contents }}
  </p>

  @if (job.salary && job.salary.min && job.salary.max) {
    <div class="mb-3 text-sm text-green-700 font-medium">
      ${{ job.salary.min | number:'1.0-0' }} - ${{ job.salary.max | number:'1.0-0' }} {{ job.salary.interval }}
    </div>
  }

  <div class="flex flex-wrap gap-2">
    
    <button
      type="button"
      (click)="onViewDetails()"
      class="inline-flex cursor-pointer items-center px-4 py-2 border border-blue-600 text-blue-600 rounded-md hover:bg-blue-50 transition-colors"
    >
      Details
    </button>

    <a
      [href]="job.refs.landing_page"
      target="_blank"
      class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"
    >
      Voir l'offre
      <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
      </svg>
    </a>

    @if (authService.isAuthenticated()) {
      <button
        (click)="onAddToFavorites()"
        [disabled]="isFavorite"
        [class.opacity-50]="isFavorite"
        [class.cursor-not-allowed]="isFavorite"
        class="inline-flex items-center px-4 py-2 border border-blue-600 text-blue-600 rounded-md hover:bg-blue-50 transition-colors disabled:hover:bg-white"
      >
        @if (isFavorite) {
          <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
          </svg>
          Déjà en favoris
        } @else {
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
          </svg>
          Ajouter aux favoris
        }
      </button>

      <button
        (click)="onTrackApplication()"
        class="inline-flex items-center px-4 py-2 border border-green-600 text-green-600 rounded-md hover:bg-green-50 transition-colors"
      >
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
        </svg>
        Suivre cette candidature
      </button>
    }
  </div>

</div>